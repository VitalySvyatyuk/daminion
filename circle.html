<!DOCTYPE html>
<html>
<head>
    <title>Circle inside circle</title>
</head>
<body>
    <canvas id="outer" width="600" height="600"></canvas>

    <script type="text/javascript">

        var canvas = document.getElementById("outer");
        var context = canvas.getContext("2d");
        var centerX = canvas.width / 2;
        var centerY = canvas.height / 2;
        var radius = 300;

        var lastGoodPositionX = 0;
        var lastGoodPositionY = 0;


        function getMousePos(canvas, evt) {
            var rect = canvas.getBoundingClientRect();
            return {
              x: evt.clientX - rect.left,
              y: evt.clientY - rect.top
            };
        }

        canvas.addEventListener('mousemove', function(evt) {

            context.clearRect(0, 0, 600, 600);
            context.beginPath();
            context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
            context.stroke();

            var mousePos = getMousePos(canvas, evt);
            var tx = mousePos.x - centerX;
            var ty = mousePos.y - centerY;
            var distance = Math.sqrt(tx**2 + ty**2);
            var radian = Math.atan2(ty,tx);
            // var angle = radian/Math.PI * 180;

            if (tx**2 + ty**2 < (radius - 50)**2) { 
                context.beginPath();
                context.arc(mousePos.x, mousePos.y, 50, 0, 2 * Math.PI, false);
                context.stroke();
                lastGoodPositionX = mousePos.x;
                lastGoodPositionY = mousePos.y;
            } else {
                var newX = 300 + 250 * Math.cos(radian);
                var newY = 300 + 250 * Math.sin(radian);
                context.beginPath();
                context.arc(newX, newY, 50, 0, 2 * Math.PI, false);
                context.stroke();
            }

        }, false);

    </script>

</body>
</html>